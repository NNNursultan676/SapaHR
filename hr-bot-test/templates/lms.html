
{% extends "base.html" %}

{% block title %}–û–±—É—á–µ–Ω–∏–µ - SapaHR{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üìö –û–±—É—á–µ–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ</h1>
    <p>–†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">üìñ</div>
        <div class="stat-info">
            <h3>{{ stats.my_courses }}</h3>
            <p>–ú–æ–∏ –∫—É—Ä—Å—ã</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-info">
            <h3>{{ stats.completed_courses }}</h3>
            <p>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">üèÜ</div>
        <div class="stat-info">
            <h3>{{ stats.total_points }}</h3>
            <p>–ë–∞–ª–ª–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ</p>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
        {% if is_admin %}
        <button class="btn btn-primary" onclick="showAddCourseModal()">+ –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</button>
        {% endif %}
    </div>
    <div class="card-body">
        <div class="courses-grid">
            {% for course in courses %}
            <div class="course-card">
                <div class="course-icon">{{ course.icon }}</div>
                <h3>{{ course.title }}</h3>
                <p>{{ course.description }}</p>
                <div class="course-meta">
                    <span>‚è± {{ course.duration }} —á–∞—Å–æ–≤</span>
                    <span>üèÜ {{ course.points }} –±–∞–ª–ª–æ–≤</span>
                </div>
                {% if course.enrollment %}
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{ course.enrollment.progress }}%"></div>
                    </div>
                    <span>{{ course.enrollment.progress }}% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                </div>
                <a href="{{ url_for('course_detail', id=course.id) }}" class="btn btn-secondary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</a>
                {% else %}
                <form action="{{ url_for('enroll_course', id=course.id) }}" method="POST">
                    <button class="btn btn-primary">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>
                </form>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.course-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 24px;
    transition: transform 0.2s;
}

.course-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
}

.course-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.course-meta {
    display: flex;
    gap: 16px;
    margin: 16px 0;
    color: #666;
}

.progress-container {
    margin: 16px 0;
}

.progress-bar {
    background: #e0e0e0;
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.progress-fill {
    background: linear-gradient(90deg, #667eea, #764ba2);
    height: 100%;
    transition: width 0.3s;
}
</style>
{% endblock %}
