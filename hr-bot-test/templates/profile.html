{% extends "base.html" %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å - SapaHR{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-avatar">
                {{ user.first_name[0] if user.first_name else '?' }}
            </div>
            <div class="profile-info">
                <h2>{{ user.first_name }} {{ user.last_name or '' }}</h2>
                <p>@{{ user.username or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
                <p class="points">üèÜ {{ user.points }} –±–∞–ª–ª–æ–≤</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('update_profile') }}">
                    <div class="form-group">
                        <label for="company">–ö–æ–º–ø–∞–Ω–∏—è</label>
                        <select id="company" name="company" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é</option>
                            {% for comp in ['Sapa Technologies', 'Neo Factoring', 'Sapa Digital Finance', 'AlgaPay', 'AI Parking', 'Sapa Digital Communications', 'Sapa Solutions'] %}
                            <option value="{{ comp }}" {% if user.company == comp %}selected{% endif %}>{{ comp }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="position">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                        <input type="text" id="position" name="position" value="{{ user.position or '' }}" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É –¥–æ–ª–∂–Ω–æ—Å—Ç—å" required>
                    </div>

                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            </div>
            <div class="card-body">
                <div class="grid-2">
                    <div class="info-item">
                        <label>Telegram ID</label>
                        <span class="value">{{ user.telegram_id }}</span>
                    </div>
                    <div class="info-item">
                        <label>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</label>
                        <span class="value">{{ user.created_at.strftime('%d.%m.%Y') }}</span>
                    </div>
                    <div class="info-item">
                        <label>–†–æ–ª—å</label>
                        <span class="value">{{ user.role }}</span>
                    </div>
                    <div class="info-item">
                        <label>–£—Ä–æ–≤–µ–Ω—å</label>
                        <span class="value">{{ user.level }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}