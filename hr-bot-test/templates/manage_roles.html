
{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ - SapaHR{% endblock %}

{% block content %}
<div class="manage-roles-page">
    <h1>üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>
    
    <div class="roles-info">
        <h3>–£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ –ø—Ä–∞–≤–∞:</h3>
        <ul>
            <li><strong>üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (5)</strong> - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ —Ä–æ–ª—è–º–∏</li>
            <li><strong>üë®‚Äçüíº –ê–¥–º–∏–Ω (4)</strong> - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã + –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–æ–≤, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
            <li><strong>üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä (3)</strong> - –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ + –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
            <li><strong>üìä –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (2)</strong> - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π (–Ω–µ –º–æ–∂–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏)</li>
            <li><strong>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (1)</strong> - –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø (–Ω–µ –º–æ–∂–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏)</li>
        </ul>
        
        {% if current_role == 'developer' %}
            <p><strong>–í–∞—à–∏ –ø—Ä–∞–≤–∞:</strong> –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –ª—é–±—ã–µ —Ä–æ–ª–∏ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</p>
        {% elif current_role == 'admin' %}
            <p><strong>–í–∞—à–∏ –ø—Ä–∞–≤–∞:</strong> –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏: –ê–¥–º–∏–Ω, –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä, –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
        {% elif current_role == 'moderator' %}
            <p><strong>–í–∞—à–∏ –ø—Ä–∞–≤–∞:</strong> –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏: –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
        {% endif %}
    </div>

    <div class="users-table">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ò–º—è</th>
                    <th>Email</th>
                    <th>–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å</th>
                    <th>–£—Ä–æ–≤–µ–Ω—å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.first_name }} {{ user.last_name }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        {% if user.role == 'developer' %}üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
                        {% elif user.role == 'admin' %}üë®‚Äçüíº –ê–¥–º–∏–Ω
                        {% elif user.role == 'moderator' %}üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä
                        {% elif user.role == 'manager' %}üìä –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å
                        {% else %}üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                        {% endif %}
                    </td>
                    <td>{{ user.role_level or 1 }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('assign_role', user_id=user.id) }}" style="display: inline-block;">
                            <select name="role" class="role-select-small">
                                {% if current_role == 'developer' %}
                                    <option value="developer" {% if user.role == 'developer' %}selected{% endif %}>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</option>
                                    <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>–ê–¥–º–∏–Ω</option>
                                    <option value="moderator" {% if user.role == 'moderator' %}selected{% endif %}>–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                                    <option value="manager" {% if user.role == 'manager' %}selected{% endif %}>–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</option>
                                    <option value="employee" {% if user.role == 'employee' %}selected{% endif %}>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                {% elif current_role == 'admin' %}
                                    <option value="moderator" {% if user.role == 'moderator' %}selected{% endif %}>–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                                    <option value="manager" {% if user.role == 'manager' %}selected{% endif %}>–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</option>
                                    <option value="employee" {% if user.role == 'employee' %}selected{% endif %}>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                {% elif current_role == 'moderator' %}
                                    <option value="manager" {% if user.role == 'manager' %}selected{% endif %}>üìä –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</option>
                                    <option value="employee" {% if user.role == 'employee' %}selected{% endif %}>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                {% endif %}
                            </select>
                            <button type="submit" class="btn-small">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.manage-roles-page {
    padding: 20px;
}

.roles-info {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 30px;
}

.roles-info ul {
    list-style: none;
    padding: 0;
}

.roles-info li {
    padding: 8px 0;
    border-bottom: 1px solid #e0e0e0;
}

.users-table {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.users-table table {
    width: 100%;
    border-collapse: collapse;
}

.users-table th {
    background: #667eea;
    color: white;
    padding: 12px;
    text-align: left;
}

.users-table td {
    padding: 12px;
    border-bottom: 1px solid #e0e0e0;
}

.role-select-small {
    padding: 6px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-right: 8px;
}

.btn-small {
    padding: 6px 16px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.btn-small:hover {
    background: #5568d3;
}

.role-select {
    padding: 8px 16px;
    border: 2px solid #667eea;
    border-radius: 6px;
    background: white;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    margin-right: 15px;
}

.role-select:hover {
    background: #f0f4ff;
}
</style>
{% endblock %}
